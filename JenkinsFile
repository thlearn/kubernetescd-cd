node{
  
  try{
  stage('Checkout'){
      checkout scm
        }
  stage('compile'){
        sh "mvn clean install"
       }
  stage('Docker Build, Push'){   
           withDockerRegistry(credentialsId: 'docker') {
	     sh "docker  build -t  hareshdocker/eksdemotomcat:1.0 ."
             sh "docker  push  hareshdocker/eksdemotomcat:1.0"
       }
     } 
	 }catch (err) {
      currentBuild.result = 'FAILURE'
    }
}

