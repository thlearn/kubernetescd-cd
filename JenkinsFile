node{
  def Namespace = "default"
  def ImageName = "sayarapp/sayarapp"
  def Creds = "2dfd9d0d-a300-49ee-aaaf-0a3efcaa5279"
  try{
  stage('Checkout'){
      checkout scm
     
      }
  stage('compile'){
  
        sh "echo $JAVA_HOME"
        sh "echo $MAVEN_HOME"
        sh "/var/jenkins_home/apache-maven-3.6.1/bin/mvn clean install"
      }
  stage('Docker Build, Push'){    
         withDockerRegistry(credentialsId: 'docker', url: 'https://registry.gitlab.com') {
             sh "echo login successful"
             sh "docker pull test1:1.0"
             
      }
      }
     } catch (err) {
      currentBuild.result = 'FAILURE'
    }
}